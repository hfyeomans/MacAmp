================================================================================
CODEX ANALYSIS: Volume Slider VOLUME.BMP Frame Rendering
================================================================================

PROBLEM STATEMENT:
Volume slider gradient shows incorrect colors at wrong positions:
- With negative offset: Red appears at 50%, blank after that
- With positive offset: Green appears at 50%, blank after that
- Should be: Green at 0% (left), smooth gradient, Red at 100% (right)

WEBAMP REFERENCE (WORKING):
From MainVolume.tsx lines 8-14:
```javascript
const volume = useTypedSelector(Selectors.getVolume);  // 0-100
const percent = volume / 100;
const sprite = Math.round(percent * 28);
const offset = (sprite - 1) * 15;
const style = { backgroundPosition: `0 -${offset}px` };
```

CSS: `background-position: 0 -${offset}px` shifts background UP to show lower frames

OUR SWIFT CODE (BROKEN):
```swift
@Published var volume: Float = 1.0  // 0.0 to 1.0 (not 0-100!)

func calculateVolumeFrameOffset() -> CGFloat {
    let percent = CGFloat(volume)  // 0.0 to 1.0
    let sprite = round(percent * 28.0)  // 0 to 28
    let offset = (sprite - 1) * 15.0
    return -offset  // or offset?
}

Image(nsImage: volumeBg)
    .interpolation(.none)
    .offset(y: calculateVolumeFrameOffset())
    .frame(width: 68, height: 13)
    .clipped()
```

CRITICAL DIFFERENCES:
1. Webamp volume is 0-100, ours is 0.0-1.0
2. Webamp uses CSS background-position, we use SwiftUI .offset()
3. Our VOLUME.BMP might be in different order than webamp's

FILES TO ANALYZE:
- MacAmpApp/Skins/Winamp.wsz (contains VOLUME.BMP)
- MacAmpApp/Views/Components/WinampVolumeSlider.swift (our implementation)
- webamp_clone/.../MainVolume.tsx (reference implementation)

VOLUME.BMP ANALYSIS NEEDED:
File: tmp/skin-inspection/classic/VOLUME.BMP (68×433 pixels)

Questions:
1. What color is at y:0-15 (top frame)?
2. What color is at y:210-225 (middle frame 14)?
3. What color is at y:405-420 (bottom frame 27)?
4. Are frames ordered green→red (top to bottom) or red→green (bottom to top)?

COORDINATE SYSTEM ANALYSIS:
SwiftUI .offset(y:) behavior:
- Positive offset: Shifts image DOWN, viewport sees what was ABOVE
- Negative offset: Shifts image UP, viewport sees what was BELOW

CSS background-position behavior:
- Negative value: Shifts background UP, viewport sees what was BELOW
- Same as SwiftUI!

EXPECTED BEHAVIOR:
Volume at 0%: Show frame 0 (GREEN)
Volume at 50%: Show frame 14 (YELLOW/ORANGE)
Volume at 100%: Show frame 27 (RED)

CURRENT BROKEN BEHAVIOR:
With offset = -offset:
- Volume at 50%: Shows RED (should be yellow!)
- Volume >50%: Shows BLANK (ran out of frames!)

With offset = offset (positive):
- Volume at 50%: Shows GREEN (should be yellow!)
- Suggests frames playing in reverse

THEORIES TO INVESTIGATE:
1. Volume range mismatch (0.0-1.0 vs 0-100)
2. Frame count wrong (28 frames vs actual count in BMP)
3. Frame height wrong (15px vs actual)
4. VOLUME.BMP frames in reverse order
5. Offset direction confusion (SwiftUI vs CSS)
6. Viewport clipping issues

SPECIFIC TASKS FOR CODEX:
1. Calculate: If volume=0.5 (50%), sprite=?, offset=?, what y-range of image shows?
2. Verify: VOLUME.BMP frame order (extract and examine each 15px slice)
3. Compare: Our calculation vs webamp's calculation step-by-step
4. Determine: Should we use round() or floor() for sprite?
5. Check: Is (sprite - 1) correct or should it be just sprite?
6. Test: Does removing -1 fix the issue?

DELIVERABLE:
Provide the EXACT Swift code that correctly renders VOLUME.BMP frames:
- Correct offset calculation
- Correct offset direction (positive or negative)
- Explanation of why it works
- Verification that green=0%, red=100%

================================================================================
CONTEXT: 558K tokens remaining, systematic debugging approach
================================================================================
