# Double Size Toggle â€“ Research

- `webamp/js/components/MainWindow/ClutterBar.tsx:11-43` wires the `D` clutter-bar button. Pointer down calls `setFocus('double')`; pointer up dispatches `Actions.toggleDoubleSizeMode()` and immediately `Actions.unsetFocus()`, so the Redux store flips the double-size flag whenever the user releases the button.
- `webamp/js/actionCreators/windows.ts:16-54` wraps `TOGGLE_DOUBLESIZE_MODE` in `withWindowGraphIntegrity()`. After dispatching the action it recalculates window sizes, computes diffs via `getPositionDiff()`, and re-applies offsets through `Actions.updateWindowPositions()` so attached windows stay aligned when their pixel dimensions change.
- `webamp/js/reducers/display.ts:62-112` owns the `display.doubled` boolean. `TOGGLE_DOUBLESIZE_MODE` simply negates the flag; other reducers (e.g., `windows`) rely on memoized selectors so they react to the updated value.
- `webamp/js/selectors.ts:468-515` derives scaled geometry. `getWPixelSize()` multiplies width/height by 2 only for windows whose `canDouble` capability is true, and `getWindowSizes()` memoizes those values. `WindowManager` consumes the results so layout math uses doubled dimensions.
- `webamp/css/webamp.css:101-119` performs the actual 200% resize. Any window whose JSX includes the `.doubled` class (see `MainWindow/index.tsx` and `EqualizerWindow/index.tsx`) receives `transform: scale(2)` with the origin pinned to the top-left corner, matching classic Winamp behaviour.
- The `Double Size` option also appears in the Options menu (`webamp/js/components/OptionsContextMenu.tsx:8-50`), mirroring the clutter-bar button and dispatching the same toggle action.
- Neighbour buttons in the clutter bar (`O`, `A`, `I`, `V`) are currently stubs: `button-o` opens the options context menu (`ContextMenuTarget` wrapper), while `button-a`, `button-i`, and `button-v` have no handlers yet beyond skin-defined styling in `webamp/css/main-window.css`. These are the slots we can scaffold for Always on top, Minibrowser/Info, and Visualizations.
